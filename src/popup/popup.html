<!DOCTYPE html>
<html>
<head>
    <title>SyncFlix</title>
    <link rel="stylesheet" href="popup.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>SyncFlix</h1>
            <!-- Add inside the header div -->
            <div class="connection-status">
                <span class="status-dot" id="connectionDot"></span>
                <span id="connectionText">Disconnected</span>
                <span id="latencyText"></span>
            </div>

            <!-- Add inside active-session div, after session-info -->
            <!-- <div class="participants-list">
                <h3>Participants</h3>
                <ul id="participantsList"></ul>
            </div> -->

            <!-- Add at the bottom of container div -->
            <div id="toastContainer" class="toast-container"></div>
        </div>

        <div class="main-content">
            <div class="no-session" id="noSessionView">
                <div class="action-buttons">
                    <input type="text" id="usernameInput" placeholder="Enter your name here">
                    <!-- <button id="createSession" class="primary-button">Create Watch Party</button> -->
                    <!-- <button id="joinSession" class="secondary-button">Join Watch Party</button> -->
                </div>
                <button id="saveUsername" class="secondary-button">Save name</button>
            </div>

            <div class="active-session hidden" id="activeSessionView">
                <div class="session-info">
                    <h2>Watch Party</h2>
                    <p>Your Session ID: <span class="sessionId" id="sessionId"></span></p>
                    <!-- <p>Participants: <span id="participantCount">1</span></p> -->
                </div>
                <button id="copyInvite" class="secondary-button">Copy your id</button>
                <button id="joinSession" class="primary-button">Join Watch Party</button>

            </div>

            <div class="active-session hidden" id="joinedSessionView">
                <div class="session-info">
                    <h2>Active Watch Party</h2>
                    <p>Your Session ID: <span class="sessionId" id="sessionId"></span></p>
                    <p>Partner's Session ID: <span id="counterSessionId"></span></p>
                    <!-- <p>Participants: <span id="participantCount">1</span></p> -->
                </div>
                <button id="copyInvite" class="secondary-button">Copy your id</button>
                <button id="leaveSession" class="primary-button">Leave Session</button>

                <input type="text" placeholder="Enter your name here">
            </div>

            <div class="join-session hidden" id="joinSessionView">
                <h2>Join Watch Party</h2>
                <input type="text" id="sessionInput" placeholder="Enter session ID or link">
                <div class="action-buttons">
                    <button id="confirmJoin" class="primary-button">Join</button>
                    <button id="cancelJoin" class="secondary-button">Cancel</button>
                </div>
            </div>
        </div>

        <div class="footer">
            <button id="settingsButton" class="icon-button">⚙️</button>
            <span id="username"></span>
        </div>
    </div>
    <script src="../js/lib/peerjs.min.js"></script>
    <script src="../js/services/notificationService.js"></script>
    <script src="popup.js" type="module"></script>
</body>
</html>